{"version":3,"file":"bundle.js","sources":["../src/Iterable.js","../src/Parse.js","../src/Spinney.js"],"sourcesContent":["export class Iterable {\n\tconstructor(data) {\n\t\tthis.data = data;\n\t}\n\n\t[Symbol.iterator]() {\n\t\tlet index = 0;\n\n\t\treturn {\n\t\t\tnext: () => {\n\t\t\t\tif (index < this.data.length) {\n\t\t\t\t\treturn { value: this.data[index++], done: false };\n\t\t\t\t} else {\n\t\t\t\t\treturn { done: true };\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}\n","import { parseDocument } from 'htmlparser2';\nimport { Iterable } from './Iterable';\n\nexport class Parse {\n\tconstructor(data, options = {}) {\n\t\tthis.root = null;\n\n\t\tthis.memoized = {};\n\t\tthis.adjacency = new Map();\n\t\tthis.attribs = new Set();\n\n\t\tthis.setUp(data, options);\n\t}\n\n\tsetUp(data, options) {\n\t\tif (typeof data === 'string') {\n\t\t\tthis.root = parseDocument(data, options);\n\t\t}\n\t}\n\n\ttoArray(data) {\n\t\tif (Array.isArray(data)) {\n\t\t\treturn data;\n\t\t}\n\t\treturn [data];\n\t}\n\n\tfromSet(set) {\n\t\tif (set instanceof Set) {\n\t\t\treturn Array.from(set.values());\n\t\t}\n\t\treturn [];\n\t}\n\n\tfromMap(map) {\n\t\tif (map instanceof Map) {\n\t\t\treturn Array.from(map.values());\n\t\t}\n\t\treturn [];\n\t}\n\n\tmemoize(keys) {\n\t\tconst array = this.toArray(keys).filter(key => {\n\t\t\tif (typeof key !== 'string') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.memoized[key] === undefined) {\n\t\t\t\tthis.memoized[key] = key.toLowerCase();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\treturn new Iterable(array);\n\t}\n\n\tincludes(node, key) {\n\t\tif (node.data) {\n\t\t\treturn node.data.toLowerCase().includes(key);\n\t\t}\n\n\t\tif (node.attribs) {\n\t\t\tfor (let attrib in node.attribs) {\n\t\t\t\tif (node.attribs[attrib].toLowerCase().includes(key)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\ttransverse(callback = () => {}) {\n\t\tlet stack = [this.root];\n\n\t\twhile (stack.length) {\n\t\t\tlet node = stack.pop();\n\n\t\t\tif (!node) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcallback(node);\n\n\t\t\tif (node.children) {\n\t\t\t\tfor (let child of node.children) {\n\t\t\t\t\tstack.push(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfind(keys, attrib) {\n\t\tconst isAttrib = typeof attrib === 'string';\n\t\tconst memoized = this.memoize(keys);\n\n\t\tconst callback = node => {\n\t\t\tif (isAttrib) {\n\t\t\t\tif (node?.attribs?.[attrib]) {\n\t\t\t\t\tthis.attribs.add(node.attribs[attrib]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let key of memoized) {\n\t\t\t\tif (this.includes(node, this.memoized[key])) {\n\t\t\t\t\tif (this.adjacency.has(key)) {\n\t\t\t\t\t\tthis.adjacency.set(key, this.adjacency.get(key).concat(node));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.adjacency.set(key, [node]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.transverse(callback);\n\n\t\tconst data = this.fromMap(this.adjacency);\n\t\tconst raws = { data: data.flat(1) };\n\n\t\tif (isAttrib) {\n\t\t\tconst attribsKey = attrib.concat('s');\n\t\t\traws[attribsKey] = this.fromSet(this.attribs);\n\t\t}\n\n\t\treturn raws;\n\t}\n}\n","import axios from 'axios';\nimport { Observable } from 'rxjs';\nimport { Parse } from './Parse';\n\nconst MAX_RETRIES = 5;\n\nclass Spinney {\n\tconstructor(href) {\n\t\tthis.seen = new Set();\n\t\tthis.href = href;\n\t\tthis.data = [];\n\t\tthis.subscriber;\n\t\tthis.keys = [];\n\t}\n\n\tprocessing;\n\n\tresume() {\n\t\tthis.processing = true;\n\t}\n\n\tpause() {\n\t\tthis.processing = false;\n\t}\n\n\tspin(keys) {\n\t\tif (!keys) {\n\t\t\tthrow new Error(`spin expected parameter keys not to be ${typeof keys}`);\n\t\t}\n\n\t\tthis.keys = keys;\n\n\t\treturn new Observable(subscriber => {\n\t\t\tthis.subscriber = subscriber;\n\n\t\t\tthis.resume();\n\t\t\tthis.next([this.href]);\n\n\t\t\treturn () => {\n\t\t\t\tthis.pause();\n\t\t\t};\n\t\t});\n\t}\n\n\tisEmpty(hrefs) {\n\t\treturn !Array.isArray(hrefs) || hrefs.length === 0;\n\t}\n\n\tfindOriginHref(href) {\n\t\tconst decoded = new URL(this.href);\n\n\t\tif (href.startsWith('/')) {\n\t\t\tdecoded.pathname = href;\n\t\t\tconst originHref = decoded.toString();\n\n\t\t\tif (href.includes('cdn')) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (href.includes('assets')) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (!this.seen.has(originHref)) {\n\t\t\t\tthis.seen.add(originHref);\n\t\t\t\treturn originHref;\n\t\t\t}\n\t\t}\n\n\t\tif (href.startsWith(decoded.origin)) {\n\t\t\tif (!this.seen.has(href)) {\n\t\t\t\tthis.seen.add(href);\n\t\t\t\treturn href;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\ttimeout(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\n\tasync fetch(href) {\n\t\ttry {\n\t\t\tlet retryAttempts = 0;\n\n\t\t\tconst retry = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst resps = await axios.get(href);\n\t\t\t\t\tconst parse = new Parse(resps.data);\n\n\t\t\t\t\tconst { data, hrefs } = parse.find(this.keys, 'href');\n\n\t\t\t\t\tconst originHrefs = hrefs\n\t\t\t\t\t\t.map(href => this.findOriginHref(href))\n\t\t\t\t\t\t.filter(Boolean);\n\n\t\t\t\t\tthis.subscriber.next({ href, data });\n\n\t\t\t\t\treturn originHrefs;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (retryAttempts >= MAX_RETRIES) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error?.response?.status) {\n\t\t\t\t\t\tswitch (error.response.status) {\n\t\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tretryAttempts++;\n\t\t\t\t\t\t\t\tawait this.timeout(500);\n\t\t\t\t\t\t\t\treturn await retry();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn await retry();\n\t\t} catch (error) {\n\t\t\tthis.subscriber.error(error);\n\t\t\tthis.pause();\n\t\t}\n\t}\n\n\tasync next(hrefs) {\n\t\tif (this.isEmpty(hrefs)) {\n\t\t\tthis.subscriber.complete();\n\t\t\tthis.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.processing) {\n\t\t\tconst nextHrefs = await Promise.all(hrefs.map(href => this.fetch(href)));\n\t\t\tawait this.next(...nextHrefs);\n\t\t}\n\t}\n}\n\nexport { Spinney };\n"],"names":["parseDocument","Observable","axios"],"mappings":"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"}